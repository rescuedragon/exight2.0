<VirtualHost *:80>
    ServerName 13.60.70.116
    DocumentRoot /var/www/html
    
    # Enable mod_rewrite
    <Directory /var/www/html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Handle React Router - serve index.html for all routes
        RewriteEngine On
        RewriteBase /
        
        # If the request is for a file or directory that exists, serve it
        RewriteCond %{REQUEST_FILENAME} -f [OR]
        RewriteCond %{REQUEST_FILENAME} -d
        RewriteRule ^ - [L]
        
        # Otherwise, serve index.html (React Router will handle the routing)
        RewriteRule ^ index.html [L]
    </Directory>
    
    # Handle API requests to the backend
    ProxyPreserveHost On
    ProxyPass /api http://localhost:3000/api
    ProxyPassReverse /api http://localhost:3000/api
    
    # Logs
    ErrorLog ${APACHE_LOG_DIR}/exight_error.log
    CustomLog ${APACHE_LOG_DIR}/exight_access.log combined
</VirtualHost> 